"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},utils=utils||{isArray:function(e){return e&&e.constructor===Array&&e instanceof Array},isObject:function(e){return e&&e.constructor===Object&&e instanceof Object},isFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)},getNumberOfDifferentArrayKeys:function(e,t){var n=[],r=null;if(!e||!e.length)return 0;for(var a=0;a<e.length;a++)r=t?e[a][t]:e[a],r&&n.push(r);return d3.set(n).size()},sortBy:function(e,t){var n=Object.prototype.toString,r=function(e){return e},a=function(e){return r(null!==e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))&&e[t.prop]||e)};return e instanceof Array&&e.length?("[object Object]"!==n.call(t)&&(t={}),"function"!=typeof t.parser&&(t.parser=r),t.desc=t.desc?-1:1,e.sort(function(e,n){return e=a.call(t,e),n=a.call(t,n),t.desc*(n>e?-1:+(e>n))})):[]}},utils=utils||{},doctype='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">';!function(){function e(e){return e&&0==e.lastIndexOf("http",0)&&-1==e.lastIndexOf(window.location.host)}function t(t,n){var r=t.querySelectorAll("image"),a=r.length;0==a&&n();for(var i=0;i<r.length;i++)!function(t){var r=t.getAttribute("xlink:href");if(r&&e(r.value))return void console.warn("Cannot render embedded images linking to external hosts: "+r.value);var i=document.createElement("canvas"),o=i.getContext("2d"),s=new Image;r=r||t.getAttribute("href"),s.src=r,s.onload=function(){i.width=s.width,i.height=s.height,o.drawImage(s,0,0),t.setAttribute("xlink:href",i.toDataURL("image/png")),a--,0==a&&n()},s.onerror=function(){console.error("Could not load "+r),a--,0==a&&n()}}(r[i])}function n(t,n){for(var r="",a=document.styleSheets,i=0;i<a.length;i++)if(e(a[i].href))console.warn("Cannot include styles from other hosts: "+a[i].href);else{var o=a[i].cssRules;if(null!=o)for(var s=0;s<o.length;s++){var l=o[s];if("undefined"!=typeof l.style){var c=null;try{c=t.querySelector(l.selectorText)}catch(u){console.warn('Invalid CSS selector "'+l.selectorText+'"',u)}if(c){var f=n?n(l.selectorText):l.selectorText;r+=f+" { "+l.style.cssText+" }\n"}else l.cssText.match(/^@font-face/)&&(r+=l.cssText+"\n")}}}return r}utils.svgAsDataUri=function(e,r,a){r=r||{},r.scale=r.scale||1;var i="http://www.w3.org/2000/xmlns/";t(e,function(){var t,o,s=document.createElement("div"),l=e.cloneNode(!0);if("svg"==e.tagName)t=parseInt(l.getAttribute("width")||l.style.width||getComputedStyle(e).getPropertyValue("width")),o=parseInt(l.getAttribute("height")||l.style.height||getComputedStyle(e).getPropertyValue("height"));else{var c=e.getBBox();t=c.x+c.width,o=c.y+c.height,l.setAttribute("transform",l.getAttribute("transform").replace(/translate\(.*?\)/,""));var u=document.createElementNS("http://www.w3.org/2000/svg","svg");u.appendChild(l),l=u}l.setAttribute("version","1.1"),l.setAttributeNS(i,"xmlns","http://www.w3.org/2000/svg"),l.setAttributeNS(i,"xmlns:xlink","http://www.w3.org/1999/xlink"),l.setAttribute("width",t*r.scale),l.setAttribute("height",o*r.scale),l.setAttribute("viewBox","0 0 "+t+" "+o),s.appendChild(l);var f=n(e,r.selectorRemap),d=document.createElement("style");d.setAttribute("type","text/css"),d.innerHTML="<![CDATA[\n"+f+"\n]]>";var h=document.createElement("defs");h.appendChild(d),l.insertBefore(h,l.firstChild);var u=doctype+s.innerHTML,p="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(u)));a&&a(p)})}}();var strategies={Barchart:function(e){return new SvgBarchartStrategy(e)},Linechart:function(e){return new SvgLinechartStrategy(e)},Streamgraph:function(e){return new SvgStreamgraphStrategy(e)}},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Colors=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"category1",value:function(){return d3.scale.ordinal().range(palette_category1)}},{key:"category2",value:function(){return d3.scale.ordinal().range(palette_category2)}},{key:"category3",value:function(){return d3.scale.ordinal().range(palette_category3)}},{key:"category4",value:function(){return d3.scale.ordinal().range(palette_category4)}},{key:"category5",value:function(){return d3.scale.ordinal().range(palette_category5)}},{key:"category6",value:function(){return d3.scale.ordinal().range(palette_category6)}},{key:"category7",value:function(){return d3.scale.ordinal().range(palette_category7)}},{key:"category8",value:function(){return d3.scale.ordinal().range(palette_category8)}},{key:"sequentialYellow",value:function(){return d3.scale.linear().range(palette_sequential_yellow)}},{key:"sequentialRedOrange",value:function(){return d3.scale.linear().range(palette_sequential_red_orange)}},{key:"sequentialRed",value:function(){return d3.scale.linear().range(palette_sequential_red)}},{key:"sequentialPink",value:function(){return d3.scale.linear().range(palette_sequential_pink)}},{key:"sequentialPurplePink",value:function(){return d3.scale.linear().range(palette_sequential_purple_pink)}},{key:"sequentialPurple",value:function(){return d3.scale.linear().range(palette_sequential_purple)}},{key:"sequentialBlue",value:function(){return d3.scale.linear().range(palette_sequential_blue)}},{key:"sequentialLightBlue",value:function(){return d3.scale.linear().range(palette_sequential_lightBlue)}},{key:"sequentialBlueViolet",value:function(){return d3.scale.linear().range(palette_sequential_blue_violet)}},{key:"sequentialTurquoise",value:function(){return d3.scale.linear().range(palette_sequential_turquoise)}},{key:"sequentialLightGreen",value:function(){return d3.scale.linear().range(palette_sequential_lightGreen)}},{key:"sequentialDarkGreen",value:function(){return d3.scale.linear().range(palette_sequential_darkGreen)}},{key:"sequentialGreenBrown",value:function(){return d3.scale.linear().range(palette_sequential_green_brown)}},{key:"sequentialBrown",value:function(){return d3.scale.linear().range(palette_sequential_brown)}},{key:"sequentialGrey",value:function(){return d3.scale.linear().range(palette_sequential_grey)}},{key:"sequentialVioletCb",value:function(){return d3.scale.linear().range(palette_sequential_violet_cb)}},{key:"sequentialPinkCb",value:function(){return d3.scale.linear().range(palette_sequential_pink_cb)}},{key:"sequentialBlueCb",value:function(){return d3.scale.linear().range(palette_sequential_blue_cb)}},{key:"sequentialGreenCb",value:function(){return d3.scale.linear().range(palette_sequential_green_cb)}},{key:"sequentialGreenBrownCb",value:function(){return d3.scale.linear().range(palette_sequential_green_brown_cb)}},{key:"diverging_spectral1",value:function(){return d3.scale.linear().range(palette_diverging_spectral1)}},{key:"diverging_spectral2",value:function(){return d3.scale.linear().range(palette_diverging_spectral2)}},{key:"diverging_spectral3",value:function(){return d3.scale.linear().range(palette_diverging_spectral3)}},{key:"diverging_brown_turquoise",value:function(){return d3.scale.linear().range(palette_diverging_brown_turquoise)}},{key:"diverging_orange_pink",value:function(){return d3.scale.linear().range(palette_diverging_orange_pink)}},{key:"diverging_red_blue",value:function(){return d3.scale.linear().range(palette_diverging_red_blue)}},{key:"diverging_red_grey",value:function(){return d3.scale.linear().range(palette_diverging_red_grey)}},{key:"diverging_orange_violet",value:function(){return d3.scale.linear().range(palette_diverging_orange_violet)}},{key:"diverging_purple_green",value:function(){return d3.scale.linear().range(palette_diverging_purple_green)}},{key:"diverging_violet_green",value:function(){return d3.scale.linear().range(palette_diverging_violet_green)}},{key:"diverging_red_green",value:function(){return d3.scale.linear().range(palette_diverging_red_green)}},{key:"diverging_brown_green",value:function(){return d3.scale.linear().range(palette_diverging_brown_green)}},{key:"diverging_lightBrown_turquoise",value:function(){return d3.scale.linear().range(palette_diverging_lightBrown_turquoise)}}]),e}(),palette_category1=["#e1c8df","#9ecd9d","#acd9d6","#e4e36b","#bfa1c5","#e4d3b8","#facba8","#ced4ea","#acd9d6"],palette_category2=["#b6dde2","#6394af","#e4e9ab","#8ea876","#f7dce1","#cc878f","#fadaac","#f29a83","#8d7e9e"],palette_category3=["#6b68a9","#8cc590","#b9487d","#bfa1c5","#4e6936","#71bbc3","#484156","#ccaf44","#d0553c"],palette_category4=["#f1a30d","#1d4763","#84c7bc","#c1212d","#8fbe46","#076837","#563a2d","#563a2d","#87325d"],palette_category5=["#f1a30d","#0c3183","#acd9d6","#c1212d","#8fbe46","#076837","#8a6338","#8d2d84","#f09bbc"],palette_category6=["#71bbc3","#1d4763","#8fbe46","#4e6936","#ee8998","#c1212d","#f5af3c","#e95e2e","#634484"],palette_category7=["#ea671e","#684592","#84b92a","#cd131c","#3c5ba2","#5baddc","#ffde06","#5db68b","#775e47"],palette_category8=["#ebd646","#a50f38","#00a096","#f09bbc","#065b78","#72722a","#005231","#4d4e98","#7c4d25"],palette_sequential_yellow=["#fff1c6","#fee5a7","#fcda87","#face64","#f8bf4b","#f6b030","#f4a009","#d28514","#b36c17","#955618","#7a4317","#613214","#49230f"],palette_sequential_red_orange=["#ffecb8","#fbd68b","#f7bf5e","#f3a82f","#df7520","#cd4925","#be0a26","#a81023","#941320","#80141d","#6d1419","#5a1215","#470f0f"],palette_sequential_red=["#fde4d4","#f1c4af","#f7bf5e","#db826a","#d0614d","#c73e36","#be0a26","#a81023","#941320","#80141d","#6d1419","#5a1215","#470f0f"],palette_sequential_pink=["#fbe3e3","#f9cfcc","#f0aaa9","#ed7e7e","#ea647b","#e74576","#e41270","#c70f65","#aa105c","#8d1253","#731448","#5a123c","#420e30"],palette_sequential_purple_pink=["#f9d8e6","#ebbed7","#dda4c7","#c890bb","#b27daf","#8a4c94","#622181","#622181","#50216b","#472060","#3e1f55","#361e4b","#2d1c41"],palette_sequential_purple=["#f6e8f1","#dcc5de","#c2a3c9","#a980b3","#905e9f","#793f8e","#622181","#592175","#4f216b","#462060","#3d1f55","#351e4b","#2c1c41"],palette_sequential_blue=["#e5f2f9","#d1e5f5","#afd3ed","#91afd7","#738bbf","#3c5a9e","#0c3183","#132a68","#10204c","#0b193b","#06142f","#051228","#061020"],palette_sequential_lightBlue=["#eff8fd","#d9eff6","#c2e5ef","#a8dae8","#90cbe4","#76b8e1","#5baddc","#4d96cc","#427ebc","#3a67ab","#324c88","#29366b","#1e2354"],palette_sequential_blue_violet=["#edf7e7","#c8e3d2","#91cdbf","#41b5ab","#218ba4","#145d94","#0c3183","#0d2d76","#0d2a6a","#0e265e","#0d2253","#0c1e47","#0b1a3c"],palette_sequential_turquoise=["#e2ecf6","#cadfe6","#b1d3d6","#94c6c6","#74b9b6","#4caca6","#00a096","#008d89","#007b7c","#006a6f","#005963","#004a57","#063b4c"],palette_sequential_lightGreen=["#faf9de","#e9efc3","#d7e4a7","#c5d989","#b1ce6a","#9cc34c","#84b92a","#6fa32b","#5a8f2a","#477c29","#346b27","#205b24","#074d21"],palette_sequential_darkGreen=["#eaf3e5","#c7d5be","#a3ba9a","#80a078","#5c885a","#357442","#00632e","#00592b","#004e27","#004423","#033a1e","#053019","#052613"],palette_sequential_green_brown=["#f7eccd","#d9cba6","#bcad82","#a29162","#887946","#716330","#5b501f","#51461d","#483d1b","#3f3418","#362b15","#2d2311","#231a0d"],palette_sequential_brown=["#f7eccd","#eed3ab","#e4bb89","#dba269","#ad7446","#834d2c","#5e2f19","#552a18","#4c2516","#432113","#3a1c11","#32180f","#29130b"],palette_sequential_grey=["#e5e8ea","#bdbfc3","#999a9f","#77797f","#595c64","#3e444c","#253038","#20282e","#1a2024","#15181b","#0e1112","#070808","#000000"],palette_sequential_violet_cb=["#f4f3f9","#e0dced","#cbc6e0","#b7b0d4","#948cbf","#706baa","#4d4e98","#484889","#42427a","#3d3c6c","#37365e","#313050","#2c2a44"],palette_sequential_pink_cb=["#fbe5ee","#f8ccd5","#f4b2bc","#f096a3","#d56976","#bc3f52","#a50f38","#951735","#851b31","#761d2e","#671e2a","#581d26","#4a1c22"],palette_sequential_blue_cb=["#eaf6fc","#cfe4f4","#cfe4f4","#91bfe3","#6999bb","#417797","#065b78","#11536b","#174b5f","#194354","#1a3b49","#1a343f","#192d35"],palette_sequential_green_cb=["#fff7d0","#e9e09b","#d1ca62","#b7b623","#9e9e28","#88872a","#72722a","#676726","#5c5c23","#51511f","#47471b","#3d3d17","#333413"],palette_sequential_green_brown_cb=["#f2edde","#d8d1c0","#bfb699","#a09778","#837b5a","#686141","#4f4b2c","#3e3e1f","#2e3313","#292d14","#232613","#1e2012","#191a10"],palette_diverging_spectral1=["#98141f","#ab332c","#bf5040","#d5705b","#e4a57f","#f3d6a6","#f5f2b8","#cfdbb1","#a4c4a9","#71ada1","#4e868f","#2e637d","#06456c"],palette_diverging_spectral2=["#d43d4f","#df564b","#eb6d45","#f08e53","#f8b96f","#fee08b","#f5f2b8","#d7e5b1","#b5d7aa","#8ec8a3","#6abda3","#4fa4b5","#3489be"],palette_diverging_spectral3=["#651035","#ae1143","#c9314b","#dd7257","#eeb27a","#feeb9e","#f5f2b8","#cadfba","#96cabb","#50b4bb","#3eaecc","#206791","#0c2c63"],palette_diverging_brown_turquoise=["#3f3128","#683828","#933624","#d5705b","#db9c5e","#feeb9e","#f5f2b8","#cfdbb1","#a4c4a9","#71ada1","#628f85","#53746d","#475b57"],palette_diverging_orange_pink=["#e7511e","#eb6929","#ee7f37","#f29446","#f9c083","#ffe9c3","#ffeee3","#f9cfc1","#f3a9ab","#db6882","#c71360","#891953","#4b1c47"],palette_diverging_red_blue=["#b2172b","#c4443e","#d76a5a","#ed937e","#f4b8a2","#fcdbc7","#efefef","#bfcad5","#8ba7bc","#4d87a5","#3c7ca0","#28729b","#036896"],palette_diverging_red_grey=["#b2172b","#c54532","#da6c3b","#f29446","#f8bc67","#fee08b","#efece5","#c9c5c1","#a5a19f","#808080","#666666","#333333","#000000"],palette_diverging_orange_violet=["#98141f","#ab332c","#f9bc47","#fdcf66","#fede8d","#ffecb3","#f9eff6","#e8d0e3","#a4c4a9","#a973aa","#834f96","#622181","#402357"],palette_diverging_purple_green=["#59194b","#85134b","#c71360","#db6882","#eba7a8","#fce0ca","#faefe1","#dbd9aa","#b9c26e","#94ad31","#728b2b","#546c25","#39521f"],palette_diverging_violet_green=["#55296e","#75408e","#8a5fa0","#a081b5","#beadcf","#ddd7e7","#eae8ed","#c1d4bc","#93be86","#58a951","#3c853e","#23662f","#084a22"],palette_diverging_red_green=["#b2172b","#c5403c","#d96453","#ef8972","#f6b49c","#fcdbc7","#f9ebde","#dad6a8","#b9c16d","#94ad31","#728b2b","#546c25","#39521f"],palette_diverging_brown_green=["#735146","#846454","#977a65","#aa9177","#c2ad91","#dbcaad","#edebd6","#c4d6aa","#94bf7c","#58a951","#3c853e","#23662f","#084a22"],palette_diverging_lightBrown_turquoise=["#8b5219","#a46821","#bf812c","#cfa151","#e2c489","#f6e8c3","#f5f1df","#cbdccc","#9cc6b9","#60afa6","#359790","#1d7d75","#00665e"],_default={Barchart:{style:{".axis":{font:"10px sans-serif"},".axis path,.axis line":{fill:"none",stroke:"#000","shape-rendering":"crispEdges"},".x.axis path":{display:"none"}},colorScale:Colors.category7(),margin:{top:20,right:20,bottom:30,left:50},width:600,height:250,ticks:5,tooltip:function(e){return"Info: "+JSON.stringify(e)},tickLabel:"",selector:"#chart",events:{down:function(){d3.select(this).classed("hover",!1)},over:function(){d3.select(this).transition().duration(150).attr("fill-opacity",.4)},leave:function(){d3.select(this).transition().duration(150).attr("fill-opacity",1)},click:function(e,t){console.log(e,t)}},transitionDuration:300,maxNumberOfElements:0,sortData:{descending:!1,prop:"x"}},Linechart:{selector:"#chart",margin:{top:20,right:20,bottom:30,left:50},width:600,height:250,style:{path:{stroke:"#11D3BC","stroke-width":2,fill:"none"},".axis":{font:"10px sans-serif"},".axis path,.axis line":{fill:"none",stroke:"#000","shape-rendering":"crispEdge"},".x.axis path":{display:"none"}},ticks:5,markers:{shape:"circle",size:5,color:"#FFFCCA",outlineColor:"#537780",outlineWidth:2},tooltip:function(e){return e},events:{down:function(){d3.select(this).classed("hover",!1)},over:function(){d3.select(this).transition().duration(50).attr("r",7)},leave:function(){d3.select(this).transition().duration(50).attr("r",5).style("stroke-width",2)},click:function(e,t){console.log(e,t)}},tickLabel:"",transitionDuration:300,maxNumberOfElements:0,sortData:{descending:!1,prop:"x"}},Streamgraph:{selector:"#chart",xDateFormat:"%m/%d/%y",colorScale:{from:"orange",to:"blue"},style:{".axis":{font:"10px sans-serif"},".axis path,.axis line":{fill:"none",stroke:"#000","shape-rendering":"crispEdges"}},margin:{top:20,right:20,bottom:30,left:50},width:900,height:300,ticks:5,tooltip:function(e){return"Info: "+JSON.stringify(e)},tickLabel:"",events:{down:function(){d3.select(this).classed("hover",!1)},over:function(){d3.select(this).transition().duration(150).attr("fill-opacity",.4)},leave:function(){d3.select(this).transition().duration(150).attr("fill-opacity",1)},click:function(e,t){console.log(e,t)}},transitionDuration:300,maxNumberOfElements:0,sortData:{descending:!1,prop:"x"}}},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),SvgStrategy=function(){function e(t){_classCallCheck(this,e),this.strategy=t}return _createClass(e,[{key:"draw",value:function(e){this.strategy.draw(e)}},{key:"on",value:function(e){this.strategy.on(e)}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),SvgChart=function(){function e(t){_classCallCheck(this,e);var n=this.constructor.name;if("SvgChart"===n)throw new Error(n+" is non-instanciable");this._initialized=!1,this.cType=t.cType,this._loadConfigOnContext(t.config),this.interactiveElements=null}return _createClass(e,[{key:"draw",value:function(e){this._sortData&&utils.sortBy(e,{prop:this._sortData.prop,desc:this._sortData.descending}),this._initialized||this._initialize()}},{key:"_applyCSS",value:function(){var e=this.style,t=null;for(var n in e)t=e[n],d3.selectAll(n).style(t)}},{key:"on",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];for(var t in e){var n=e[t];this.interactiveElements.on(t+".user",n)}}},{key:"_loadConfigOnContext",value:function(e){this.margin=e.margin||_default[this.cType].margin,this.width=e.width||_default[this.cType].width,this.height=e.height||_default[this.cType].height,this.ticks=e.ticks||_default[this.cType].ticks,this.tickLabel=e.tickLabel||_default[this.cType].tickLabel,this.selector=e.selector||_default[this.cType].selector,this.transitionDuration=e.transitionDuration||_default[this.cType].transitionDuration,this.tooltip=e.tooltip||_default[this.cType].tooltip,this.events={},this.events.down=e.events.down||_default[this.cType].events.down,this.events.up=e.events.up||_default[this.cType].events.up,this.events.over=e.events.over||_default[this.cType].events.over,this.events.click=e.events.click||_default[this.cType].events.click,this.events.leave=e.events.leave||_default[this.cType].events.leave,this._sortData=e.sortData||_default[this.cType].sortData,this.style=e.style||_default[this.cType].style,this.colorScale=e.colorScale||_default[this.cType].colorScale}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in a)return a.value;var o=a.get;if(void 0!==o)return o.call(r)},SvgBarchartStrategy=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e));return n.xAxisName="x",n.yAxisName="y",n.x=d3.scale.ordinal().rangeRoundBands([0,n.width],.1),n.y=d3.scale.linear().range([n.height,0]),n.xAxis=d3.svg.axis().scale(n.x).orient("bottom").ticks(10),n.yAxis=d3.svg.axis().scale(n.y).orient("left").innerTickSize(-n.width).outerTickSize(0).tickPadding(20).ticks(n.ticks,n.tickLabel),n.keyFunction=function(e){return e.x},n}return _inherits(t,e),_createClass(t,[{key:"draw",value:function(e){var n=this,r=null,a=Number.MIN_VALUE;_get(Object.getPrototypeOf(t.prototype),"draw",this).call(this,e),this.x.domain(e.map(this.keyFunction)),a=d3.max(e,function(e){return e[n.yAxisName]}),this.y.domain([0,a]),this.svg.select(".x.axis").transition().duration(this.transitionDuration).call(this.xAxis),this.svg.select(".y.axis").transition().duration(this.transitionDuration).call(this.yAxis),r=this.svg.selectAll(".bar").data(e,this.keyFunction),r.enter().append("rect").attr("class","bar").attr("height",function(e){return n.height-n.y(e[n.yAxisName])}).attr("fill",function(e,t){return n.colorScale(t)}).on("mousedown.user",this.events.down).on("mouseup.user",this.events.up).on("mouseleave.user",this.events.leave).on("mouseover.user",this.events.over).on("click.user",this.events.click),this.interactiveElements=r,r.exit().transition().duration(300).attr("y",this.y(0)).attr("height",this.height-this.y(0)).style("fill-opacity",1e-6).style().remove(),r.transition().duration(300).attr("x",function(e){return n.x(e[n.xAxisName])}).attr("width",this.x.rangeBand()).attr("y",function(e){return n.y(e[n.yAxisName])}).attr("height",function(e){return n.height-n.y(e[n.yAxisName])}),this._applyCSS()}},{key:"_initialize",value:function(){var e=this.width+this.margin.left+this.margin.right,t=this.height+this.margin.left+this.margin.right;this.svg=d3.select(this.selector).append("svg").attr({width:e,height:t}).append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.svg.append("g").attr("class","x axis").attr("transform","translate(0,"+this.height+")").call(this.xAxis),this.svg.append("g").attr("class","y axis").attr("stroke-dasharray","5, 5").call(this.yAxis).append("text"),this._initialized=!0}},{key:"_loadConfigOnContext",value:function(e){return e=e||{events:{}},e.events||(e.events={}),_get(Object.getPrototypeOf(t.prototype),"_loadConfigOnContext",this).call(this,e),this}}]),t}(SvgChart),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function t(e,n,r){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,n);if(void 0===a){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in a)return a.value;var o=a.get;if(void 0!==o)return o.call(r)},SvgLinechartStrategy=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e));return n.xAxisName="x",n.yAxisName="y",n.x=d3.scale.linear().range([0,n.width]),n.y=d3.scale.linear().range([n.height,0]),n.xAxis=d3.svg.axis().scale(n.x).orient("bottom").ticks(10),n.yAxis=d3.svg.axis().scale(n.y).orient("left").innerTickSize(-n.width).outerTickSize(0).tickPadding(20).ticks(n.ticks,n.tickLabel),n.keyFunction=function(e){return e.x},n}return _inherits(t,e),_createClass(t,[{key:"draw",value:function(e){var n=this,r=null,a=null,i=null;if(_get(Object.getPrototypeOf(t.prototype),"draw",this).call(this,e),this.x.domain([d3.min(e,function(e){return e.x}),d3.max(e,function(e){return e.x})]),this.y.domain([0,d3.max(e,function(e){return e.y})]),this.svg.select(".x.axis").transition().duration(this.transitionDuration).call(this.xAxis),this.svg.select(".y.axis").transition().duration(this.transitionDuration).call(this.yAxis),r=d3.svg.line().x(function(e){return n.x(e.x)}).y(function(e){return n.y(e.y)}),a=this.svg.select("path").datum(e,this.keyFunction).attr("d",r),this.markers)switch(this.markers.shape){case"circle":i=this.svg.selectAll("circle").data(e,this.keyFunction),i.enter().append("circle").attr("cx",function(e){return n.x(e.x)}).attr("cy",function(e){return n.y(e.y)}).attr("r",this.markers.size).style({fill:this.markers.color,stroke:this.markers.outlineColor,"stroke-width":this.markers.outlineWidth}),i.transition().attr("cx",function(e){return n.x(e.x)}).attr("cy",function(e){return n.y(e.y)}).duration(0);break;default:throw Error("Not a valid marker shape: "+this.markers.shape)}this.tooltip&&i.append("title").text(this.tooltip(function(e){return n.x(e.x)})),i.on("mousedown.user",this.events.down).on("mouseup.user",this.events.up).on("mouseleave.user",this.events.leave).on("mouseover.user",this.events.over).on("click.user",this.events.click),this.interactiveElements=i,this._applyCSS()}},{key:"_initialize",value:function(){var e=this.width+this.margin.left+this.margin.right,t=this.height+this.margin.left+this.margin.right;this.svg=d3.select(this.selector).append("svg").attr({width:e,height:t}).append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.svg.append("path"),this.svg.append("g").attr("class","x axis").attr("transform","translate(0,"+this.height+")").call(this.xAxis),this.svg.append("g").attr("class","y axis").attr("stroke-dasharray","5, 5").call(this.yAxis).append("text"),this._initialized=!0}},{key:"_loadConfigOnContext",value:function(e){return e=e||{events:{},markers:{}},e.events||(e.events={}),e.markers||(e.markers={}),_get(Object.getPrototypeOf(t.prototype),"_loadConfigOnContext",this).call(this,e),this.markers={},this.markers.color=e.markers.color||_default.Linechart.markers.color,this.markers.outlineColor=e.markers.outlineColor||_default.Linechart.markers.outlineColor,this.markers.outlineWidth=e.markers.outlineWidth||_default.Linechart.markers.outlineWidth,this.markers.shape=e.markers.shape||_default.Linechart.markers.shape,this.markers.size=e.markers.size||_default.Linechart.markers.size,this}}]),t}(SvgChart),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function n(e,t,r){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,t);if(void 0===a){var i=Object.getPrototypeOf(e);return null===i?void 0:n(i,t,r)}if("value"in a)return a.value;var o=a.get;if(void 0!==o)return o.call(r)},SvgStreamgraphStrategy=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e));return n.x=d3.time.scale().range([0,n.width]),n.y=d3.scale.linear().range([n.height-10,0]),n.format=d3.time.format(n.xDateformat),n.xAxis=d3.svg.axis().scale(n.x).orient("bottom").ticks(d3.time.days),n.yAxis=d3.svg.axis().scale(n.y),n}return _inherits(t,e),_createClass(t,[{key:"draw",value:function(e){var t=this,n=null,r=null,a=this.colorScale.from,i=this.colorScale.to,o=null;this._initialized||this._initialize(),e.forEach(function(e){e.date=t.format.parse(e.date),e.value=+e.value}),this.stack=d3.layout.stack().offset("silhouette").values(function(e){return e.values}).x(function(e){return e.date}).y(function(e){return e.value}),this.nest=d3.nest().key(function(e){return e.key}),this.area=d3.svg.area().interpolate("cardinal").x(function(e){return t.x(e.date)}).y0(function(e){
return t.y(e.y0)}).y1(function(e){return t.y(e.y0+e.y)}),n=this.stack(this.nest.entries(e)),this.x.domain(d3.extent(e,function(e){return e.date})),this.y.domain([0,d3.max(e,function(e){return e.y0+e.y})]),r=utils.getNumberOfDifferentArrayKeys(e,"key"),o=chroma.scale([a,i]).colors(r),this.z=d3.scale.ordinal().range(o),this.svg.selectAll(".layer").data(n).enter().append("path").attr("class","layer").attr("d",function(e){return t.area(e.values)}).style("fill",function(e,n){return t.z(n)}),this.svg.selectAll(".layer").attr("opacity",1).on("mousedown.user",this.events.down).on("mouseup.user",this.events.up).on("mouseleave.user",this.events.leave).on("mouseover.user",this.events.over).on("click.user",this.events.click);d3.select(this.selector).append("div").attr("class","remove").style("position","absolute").style("z-index","19").style("width","1px").style("height","380px").style("top","10px").style("bottom","30px").style("left","0px").style("background","#000000");this._applyCSS()}},{key:"_initialize",value:function(){var e=this.width+this.margin.left+this.margin.right,t=this.height+this.margin.left+this.margin.right;this.svg=d3.select(this.selector).append("svg").attr({width:e,height:t}).append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.svg.append("g").attr("class","x axis").attr("transform","translate(0,"+this.height+")").call(this.xAxis),this.svg.append("g").attr("class","y axis").attr("transform","translate("+this.width+", 0)").call(this.yAxis.orient("right")),this.svg.append("g").attr("class","y axis").call(this.yAxis.orient("left")),this._initialized=!0}},{key:"_loadConfigOnContext",value:function(e){e=e||{events:{}},e.events||(e.events={}),_get(Object.getPrototypeOf(t.prototype),"_loadConfigOnContext",this).call(this,e),this.colorScale=e.colorScale||_default.Streamgraph.colorScale,this.xDateformat=e.xDateFormat||_default.Streamgraph.xDateFormat}}]),t}(SvgChart),_get=function r(e,t,n){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,t);if(void 0===a){var i=Object.getPrototypeOf(e);return null===i?void 0:r(i,t,n)}if("value"in a)return a.value;var o=a.get;if(void 0!==o)return o.call(n)},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Chart=function(){function e(){_classCallCheck(this,e);var t=this.constructor.name;if("Chart"===t||"Basic"===t||"Flow"===t)throw new Error(t+" is non-instanciable");this.events={}}return _createClass(e,[{key:"_getChartContext",value:function(){return{data:this.data,config:this.config,cType:this.constructor.name}}},{key:"_initializeSVGContext",value:function(){this._svg=new SvgStrategy(strategies[this.constructor.name](this._getChartContext()))}},{key:"_inferDataSource",value:function(e){if(utils.isObject(e))this._initializeWebsocketDataSource(e);else if(!utils.isArray(e))throw new TypeError("Wrong data format")}},{key:"_initializeWebsocketDataSource",value:function(e){var t=this,n=function(){t.ws=new WebSocket(e.endpoint),t.ws.onopen=function(){},t.ws.onerror=function(e){throw new Error("Error with websocket connection",e)},t.ws.onmessage=function(e){var n=JSON.parse(e.data.substr(2))[1];setTimeout(function(){t.keepDrawing(n)},50)}};this.start=function(){n()},this.stop=function(){t.ws&&t.ws.close()}}},{key:"addSerie",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];if(!e||!utils.isObject(e))throw Error("'serie' should be an object. Instead: "+series);this.data.push(e),t&&this.draw()}},{key:"addSeries",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];if(!e||e.constructor!==Array)throw Error("'series' should be an array. Instead: "+e);this.data=this.data.concat(e),t&&this.draw()}},{key:"removeSerie",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];if(!e||!utils.isObject(e))throw Error("'serie' should be an object. Instead: "+series);this.data.some(function(n,r,a){var i=JSON.stringify(n)===JSON.stringify(e);return i?t.data.splice(r,1):void 0}),n&&this.draw()}},{key:"draw",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.data:arguments[0];if(!utils.isArray(e))throw new TypeError("draw method is only allowed with static data.");this._svg.draw(e)}},{key:"toPNG",value:function(e){utils.svgAsDataUri(d3.select(this.config.selector+" svg")[0][0],{},function(t,n){if(n)throw Error("Error converting to image "+n);e(t)})}},{key:"on",value:function(e,t){if(!e||"string"!=typeof e)throw Error("eventName should be a string. Instead: "+e);if(!t||!utils.isFunction(t))throw Error("action should be a function. Instead: "+e);return this.events[e]=t,this._svg.on(this.events),this}}]),e}(),Basic=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this))}return _inherits(t,e),t}(Chart),Flow=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this))}return _inherits(t,e),_createClass(t,[{key:"draw",value:function(e){e=JSON.parse(JSON.stringify(e)),_get(Object.getPrototypeOf(t.prototype),"draw",this).call(this,e)}}]),t}(Chart),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function a(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:a(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},Barchart=function(e){function t(e,n){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));if(!arguments.length)throw new Error("Missing constructor parameters");switch(r._inferDataSource(arguments[0]),arguments.length){case 1:r.data=arguments[0],r.config=_default[r.constructor.name];break;case 2:r.data=arguments[0],r.config=arguments[1];break;default:throw Error("Unrecognized number of paremeters: "+arguments)}return r._initializeSVGContext(),r}return _inherits(t,e),_createClass(t,[{key:"draw",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.data:arguments[0];_get(Object.getPrototypeOf(t.prototype),"draw",this).call(this,e)}},{key:"keepDrawing",value:function(e){var n=this.config,r=n.maxNumberOfElements;if(this.datum||(this.datum=[]),this.datum=this.datum.concat(e),r&&r>0&&this.datum.length>r)for(var a=0;a<e.length;a++)this.datum.shift();_get(Object.getPrototypeOf(t.prototype),"draw",this).call(this,this.datum)}}]),t}(Basic),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function i(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:i(a,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},Linechart=function(e){function t(e,n){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));if(!arguments.length)throw new Error("Missing constructor parameters");switch(r._inferDataSource(arguments[0]),arguments.length){case 1:r.data=arguments[0],r.config=_default[r.constructor.name];break;case 2:r.data=arguments[0],r.config=arguments[1];break;default:throw Error("Unrecognized number of paremeters: "+arguments)}return r._initializeSVGContext(),r}return _inherits(t,e),_createClass(t,[{key:"draw",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.data:arguments[0];_get(Object.getPrototypeOf(t.prototype),"draw",this).call(this,e)}},{key:"keepDrawing",value:function(e){var n=this.config,r=n.maxNumberOfElements;if(this.datum||(this.datum=[]),this.datum=this.datum.concat(e),r&&r>0&&this.datum.length>r)for(var a=0;a<e.length;a++)this.datum.shift();_get(Object.getPrototypeOf(t.prototype),"draw",this).call(this,this.datum)}}]),t}(Basic),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function o(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:o(a,t,n)}if("value"in r)return r.value;var i=r.get;if(void 0!==i)return i.call(n)},Streamgraph=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));if(!arguments.length)throw new Error("Missing constructor parameters");switch(e._inferDataSource(arguments[0]),arguments.length){case 1:e.data=arguments[0],e.config=_default;break;case 2:e.data=arguments[0],e.config=arguments[1];break;default:throw Error("Unrecognized number of paremeters: "+arguments)}return e._initializeSVGContext(),e}return _inherits(t,e),_createClass(t,[{key:"draw",value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.data:arguments[0];_get(Object.getPrototypeOf(t.prototype),"draw",this).call(this,e)}},{key:"keepDrawing",value:function(e){this.datum||(this.datum=[]),this.datum=this.datum.concat(e),_get(Object.getPrototypeOf(t.prototype),"draw",this).call(this,this.datum)}}]),t}(Flow);